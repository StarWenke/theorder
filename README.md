# 小蛮腰后台订单模块

### 需求：

* 用户挑选商品后点击支付生成订单,商品库存（store）减少相应数量
* 用户可以取消未支付的订单，返回库存
* 当未支付的订单存在超过30mins后转为支付超时订单，订单失效,返回库存
* 用户支付订单


### 数据库设计：
* 商品表（商品名称，价格int-单位为分，库存store，详细描述desc）
* 收货用户表（姓名，用户id，手机号，收货地址，是否删除）【另起一张表，因为一个用户可以设置多个收货用户】
* 订单表（订单编号，创建时间，支付时间，[用户id]查询一个用户的所有订单用到,收货用户id,name,address,phone避免重复查数据库，订单状态，订单快照json）
* 订单项表（订单id，商品id，商品数量）

订单状态：
* 0 - 订单未支付
* 1 - 订单已支付
* 2 - 订单已取消
* 3 - 订单支付超时


### 接口设计：

* 生成订单
  * 参数
    * 收货用户id，商品id，商品数量


* 查询订单
  * 参数
    * 用户id
  * 回应
    * 订单数据,按生成订单的时间降序（DESC）排序


* 查询各个状态的订单
  * 参数
    * 用户id
    * 订单状态
  * 回应
    * 订单数据,按生成订单的时间降序（DESC）排序


* 支付订单-商品状态变化（0》1）
  * 参数
    * 订单id
    * xxx
    

* 订单取消（0》2）
  * 参数
    * 订单id
